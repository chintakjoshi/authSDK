# -----------------------------------------------------------------------------
# Local Docker defaults for auth-service
# Copy this file to `.env` at repository root before running docker compose.
# -----------------------------------------------------------------------------

APP__ENVIRONMENT=development
APP__SERVICE=auth-service
APP__HOST=0.0.0.0
APP__PORT=8000
APP__LOG_LEVEL=INFO

# Container-internal service URLs (used by auth-service container)
DATABASE__URL=postgresql+asyncpg://postgres@postgres:5432/auth_service
REDIS__URL=redis://redis:6379/0

JWT__ALGORITHM=RS256
JWT__ACCESS_TOKEN_TTL_SECONDS=900
JWT__REFRESH_TOKEN_TTL_SECONDS=604800

# Optional for Docker compose flow:
# Leave these unset to let container startup generate ephemeral RSA keys.
# JWT__PRIVATE_KEY_PEM=
# JWT__PUBLIC_KEY_PEM=

OAUTH__GOOGLE_CLIENT_ID=local-google-client-id
OAUTH__GOOGLE_CLIENT_SECRET=local-google-client-secret
OAUTH__GOOGLE_REDIRECT_URI=http://localhost:8000/auth/oauth/google/callback
OAUTH__REDIRECT_URI_ALLOWLIST=["http://localhost:8000/auth/oauth/google/callback"]

SAML__SP_ENTITY_ID=local-sp-entity
SAML__SP_ACS_URL=http://localhost:8000/auth/saml/callback
SAML__SP_X509_CERT=local-sp-cert
SAML__SP_PRIVATE_KEY=local-sp-private-key
SAML__IDP_ENTITY_ID=local-idp-entity
SAML__IDP_SSO_URL=https://idp.example.com/sso
SAML__IDP_X509_CERT=local-idp-cert

RATE_LIMIT__DEFAULT_REQUESTS_PER_MINUTE=120
RATE_LIMIT__LOGIN_REQUESTS_PER_MINUTE=10
RATE_LIMIT__TOKEN_REQUESTS_PER_MINUTE=30

# v2 Step 1 signing key rotation controls
SIGNING_KEYS__ROTATION_OVERLAP_SECONDS=900
# Optional explicit encryption key for stored private keys.
# If unset, the service derives one from JWT__PRIVATE_KEY_PEM for local fallback.
# SIGNING_KEYS__ENCRYPTION_KEY=
